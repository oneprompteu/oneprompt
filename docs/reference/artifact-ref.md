# ArtifactRef

An `ArtifactRef` represents a file generated by an agent execution (CSV data, JSON data, or HTML chart).

```python
result = client.query("Top products")

artifact = result.artifacts[0]
print(artifact.name)  # "top_products.csv"
print(artifact.path)  # "tp_data/out/default_local_user/abc123/top_products.csv"
```

---

## Properties

| Property | Type | Description |
|----------|------|-------------|
| `id` | `str` | Unique artifact identifier |
| `name` | `str` | Filename (e.g. `top_products.csv`, `chart.html`) |
| `type` | `str \| None` | Artifact type: `"data"`, `"result"`, or `"chart"` |
| `path` | `str \| None` | Local file path (after download to `tp_data/out/`) |
| `url` | `str \| None` | Remote URL in the Artifact Store |

---

## Methods

### `read_text()`

Read the artifact content as a UTF-8 string.

```python
read_text() -> str
```

```python
csv_content = artifact.read_text()
print(csv_content)
# product_name,total_revenue
# Widget Pro,45230.00
# Gadget X,38100.00
```

!!! warning
    Raises `FileNotFoundError` if the artifact path is not available.

### `read_bytes()`

Read the artifact content as raw bytes.

```python
read_bytes() -> bytes
```

```python
raw = artifact.read_bytes()
```

!!! warning
    Raises `FileNotFoundError` if the artifact path is not available.

---

## Artifact Types

| Type | Generated By | Typical Files |
|------|-------------|---------------|
| `data` | Data Agent (`query`) | `.csv`, `.json` |
| `result` | Python Agent (`analyze`) | `.csv`, `.json` |
| `chart` | Chart Agent (`chart`) | `.html` |

---

## File Location

Artifacts are downloaded to:

```
tp_data/out/{session_id}/{run_id}/{filename}
```

For example:

```
tp_data/out/default_local_user/7c2978d9eb4e4536/top_products.csv
tp_data/out/default_local_user/7c2978d9eb4e4536/top_products.json
tp_data/out/default_local_user/9e4190f1bc34/bar_chart.html
```

---

## Working with Artifacts

### Read as pandas DataFrame

```python
import pandas as pd

result = client.query("All orders this month")
csv_path = result.artifacts[0].path
df = pd.read_csv(csv_path)
```

### Read JSON data

```python
import json

result = client.query("Revenue by category")
json_artifact = [a for a in result.artifacts if a.name.endswith(".json")][0]
data = json.loads(json_artifact.read_text())
```

### Open chart in browser

```python
import webbrowser

chart = client.chart("Bar chart of sales", data_from=data)
webbrowser.open(f"file://{chart.artifacts[0].path}")
```
